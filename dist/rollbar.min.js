!function(a,b){function c(b){var d=a.location.protocol;0!==d.indexOf("http")&&(d="https:");var e=d+"//"+c.DEFAULT_ENDPOINT;this.options={endpoint:e,environment:"production",scrubFields:h.copy(c.DEFAULT_SCRUB_FIELDS),itemsPerMinute:60,checkIgnore:null,logLevel:c.DEFAULT_LOG_LEVEL,reportLevel:c.DEFAULT_REPORT_LEVEL,uncaughtErrorLevel:c.DEFAULT_UNCAUGHT_ERROR_LEVEL,payload:{}},this.lastError=null,this.plugins={},this.parentNotifier=b,this.logger=function(){if(a.console&&a.console.log){var b=["Rollbar internal error:"].concat(Array.prototype.slice.call(arguments,0));a.console.log(b)}},b&&(b.hasOwnProperty("shimId")?b.notifier=this:(this.logger=b.logger,this.configure(b.options)))}function d(a,b){return function(){var c=b||this;try{return a.apply(c,arguments)}catch(d){c&&c.logger(d)}}}function e(a){var b=a.match(q),c="(unknown)";return b&&(c=b[b.length-1],a=a.replace((b[b.length-2]||"")+c+":",""),a=a.replace(/(^[\s]+|[\s]+$)/g,"")),[c,a]}function f(){for(var b;b=a._rollbarPayloadQueue.pop();)g(b.endpointUrl,b.payload,b.callback);p=setTimeout(f,1e3)}function g(b,c,d){d=d||function(){};var e=(new Date).getTime();e-r>=6e4&&(r=e,s=0);var f=a._globalRollbarOptions.itemsPerMinute;return void 0!==f&&s>=f?void d(new Error(f+" items per minute reached")):(s++,void n.post(b,c,function(a,b){return a?d(a):d(null,b)}))}var h={merge:function(){var a,b,c,d,e,f,g=arguments[0]||{},i=1,j=arguments.length,k=!0;for("object"!=typeof g&&"function"!=typeof g&&(g={});j>i;i++)if(null!==(a=arguments[i]))for(b in a)c=g[b],d=a[b],g!==d&&(k&&d&&(d.constructor==Object||(e=d.constructor==Array))?(e?(e=!1,f=c&&c.constructor==Array?c:[]):f=c&&c.constructor==Object?c:{},g[b]=h.merge(f,d)):void 0!==d&&(g[b]=d));return g},copy:function(a){var b;return"object"==typeof a&&(a.constructor==Object?b={}:a.constructor==Array&&(b=[])),h.merge(b,a),b},parseUriOptions:{strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},parseUri:function(a){if(!a||"string"!=typeof a&&!(a instanceof String))throw new Error("Util.parseUri() received invalid input");for(var b=h.parseUriOptions,c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";return d[b.q.name]={},d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)}),d},sanitizeUrl:function(a){if(!a||"string"!=typeof a&&!(a instanceof String))throw new Error("Util.sanitizeUrl() received invalid input");var b=h.parseUri(a);return""===b.anchor&&(b.source=b.source.replace("#","")),a=b.source.replace("?"+b.query,"")},traverse:function(a,b){var c,d,e,f="object"==typeof a,g=[];if(f)if(a.constructor===Object)for(c in a)a.hasOwnProperty(c)&&g.push(c);else if(a.constructor===Array)for(e=0;e<a.length;++e)g.push(e);for(e=0;e<g.length;++e)c=g[e],d=a[c],f="object"==typeof d,a[c]=f?null===d?b(c,d):d.constructor===Object?h.traverse(d,b):d.constructor===Array?h.traverse(d,b):b(c,d):b(c,d);return a},redact:function(a){return a=String(a),new Array(a.length+1).join("*")},uuid4:function(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:7&c|8).toString(16)});return b}},j={},k={a:[{b:1}]};try{var l=JSON.stringify(k);'{"a":[{"b":1}]}'!==l?setupCustomJSON(j):(j.stringify=JSON.stringify,j.parse=JSON.parse)}catch(m){setupCustomJSON(j)}var n={XMLHttpFactories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],createXMLHTTPObject:function(){var a,b=!1,c=n.XMLHttpFactories,d=c.length;for(a=0;d>a;a++)try{b=c[a]();break}catch(e){}return b},post:function(a,b,c){if("object"!=typeof b)throw new Error("Expected an object to POST");b=j.stringify(b),c=c||function(){};var d=n.createXMLHTTPObject();if(d)try{try{var e=function(){try{e&&4===d.readyState&&(e=void 0,200===d.status?c(null,j.parse(d.responseText)):c("number"==typeof d.status&&d.status>=400&&d.status<600?new Error(d.status.toString()):new Error))}catch(a){var b;b="object"==typeof a&&a.stack?a:new Error(a),c(b)}};d.open("POST",a,!0),d.setRequestHeader&&d.setRequestHeader("Content-Type","application/json"),d.onreadystatechange=e,d.send(b)}catch(f){if("undefined"!=typeof XDomainRequest){var g=function(){c(new Error)},h=function(){c(new Error)},i=function(){c(null,j.parse(d.responseText))};d=new XDomainRequest,d.onprogress=function(){},d.ontimeout=g,d.onerror=h,d.onload=i,d.open("POST",a,!0),d.send(b)}}}catch(k){c(k)}}};c.NOTIFIER_VERSION="1.0.0-beta9",c.DEFAULT_ENDPOINT="api.rollbar.com/api/1/",c.DEFAULT_SCRUB_FIELDS=["passwd","password","secret","confirm_password","password_confirmation"],c.DEFAULT_LOG_LEVEL="debug",c.DEFAULT_REPORT_LEVEL="warning",c.DEFAULT_UNCAUGHT_ERROR_LEVEL="warning",c.LEVELS={debug:0,info:1,warning:2,error:3,critical:4},a._rollbarPayloadQueue=[],a._globalRollbarOptions={startTime:(new Date).getTime()};var o=computeStackTraceWrapper({remoteFetching:!1,linesOfContext:3});c._generateLogFn=function(a){return d(function(){var b=this._getLogArgs(arguments);return this._log(a||b.level||this.options.logLevel||c.DEFAULT_LOG_LEVEL,b.message,b.err,b.custom,b.callback)})},c.prototype._getLogArgs=function(a){for(var b,e,f,g,h,i,j,k=this.options.logLevel||c.DEFAULT_LOG_LEVEL,l=0;l<a.length;++l)j=a[l],i=typeof j,"string"===i?e=j:"function"===i?h=d(j,this):j&&"object"===i&&("Date"===j.constructor.name?b=j:j instanceof Error||j.prototype===Error.prototype||j.hasOwnProperty("stack")?f=j:g=j);return{level:k,message:e,err:f,custom:g,callback:h}},c.prototype._route=function(a){var b=this.options.endpoint,c=/\/$/.test(b),d=/^\//.test(a);return c&&d?a=a.substring(1):c||d||(a="/"+a),b+a},c.prototype._processShimQueue=function(a){for(var b,d,e,f,g,h,i,j={};d=a.shift();)b=d.shim,e=d.method,f=d.args,g=b.parentShim,i=j[b.shimId],i||(g?(h=j[g.shimId],i=new c(h)):i=this,j[b.shimId]=i),i[e]&&"function"==typeof i[e]&&i[e].apply(i,f)},c.prototype._buildPayload=function(b,d,e,f,g){var i=this.options.accessToken,j=this.options.environment,k=h.copy(this.options.payload),l=h.uuid4();if(void 0===c.LEVELS[d])throw new Error("Invalid level");if(!e&&!f&&!g)throw new Error("No message, stack info or custom data");var m={environment:j,endpoint:this.options.endpoint,uuid:l,level:d,platform:"browser",framework:"browser-js",language:"javascript",body:this._buildBody(e,f,g),request:{url:a.location.href,query_string:a.location.search,user_ip:"$remote_ip"},client:{runtime_ms:b.getTime()-a._globalRollbarOptions.startTime,timestamp:Math.round(b.getTime()/1e3),javascript:{browser:a.navigator.userAgent,language:a.navigator.language,cookie_enabled:a.navigator.cookieEnabled,screen:{width:a.screen.width,height:a.screen.height},plugins:this._getBrowserPlugins()}},server:{},notifier:{name:"rollbar-browser-js",version:c.NOTIFIER_VERSION}};k.body&&delete k.body;var n={access_token:i,data:h.merge(m,k)};return this._scrub(n.data),n},c.prototype._buildBody=function(a,b,c){var d;return d=b&&"failed"!==b.mode?this._buildPayloadBodyTrace(a,b,c):this._buildPayloadBodyMessage(a,c)},c.prototype._buildPayloadBodyMessage=function(a,b){var c={body:a};return b&&(c.extra=h.copy(b)),{message:c}},c.prototype._buildPayloadBodyTrace=function(a,b,c){var d=e(b.message),f=b.name||d[0],g=d[1],i={exception:{"class":f,message:g}};if(a&&(i.exception.description=a||"uncaught exception"),b.stack){var j,k,l,m,n,o,p,q;for(i.frames=[],p=0;p<b.stack.length;++p)j=b.stack[p],k={filename:j.url?h.sanitizeUrl(j.url):"(unknown)",lineno:j.line||null,method:j.func&&"?"!==j.func?j.func:"[anonymous]",colno:j.column},l=m=n=null,o=j.context?j.context.length:0,o&&(q=Math.floor(o/2),m=j.context.slice(0,q),l=j.context[q],n=j.context.slice(q)),l&&(k.code=l),(m||n)&&(k.context={},m&&m.length&&(k.context.pre=m),n&&n.length&&(k.context.post=n)),j.args&&(k.args=j.args),i.frames.push(k);return c&&(i.extra=h.copy(c)),{trace:i}}return this._buildPayloadBodyMessage(f+": "+g,c)},c.prototype._getBrowserPlugins=function(){if(!this._browserPlugins){var b,c=a.navigator.plugins||[],d=c.length,e=[];for(i=0;d>i;++i)b=c[i],e.push({name:b.name,description:b.description});this._browserPlugins=e}return this._browserPlugins},c.prototype._scrub=function(a){function b(a,b,c,d,e,f){return b+h.redact(f)}function c(a){var c;if("string"==typeof a)for(c=0;c<i.length;++c)a=a.replace(i[c],b);return a}function d(a,b){var c;for(c=0;c<g.length;++c)if(g[c].test(a)){b=h.redact(b);break}return b}function e(a,b){var e=d(a,b);return e===b?c(e):e}var f=this.options.scrubFields,g=this._getScrubFieldRegexs(f),i=this._getScrubQueryParamRegexs(f);return h.traverse(a,e),a},c.prototype._getScrubFieldRegexs=function(a){for(var b,c=[],d=0;d<a.length;++d)b="\\[?(%5[bB])?"+a[d]+"\\[?(%5[bB])?\\]?(%5[dD])?",c.push(new RegExp(b,"i"));return c},c.prototype._getScrubQueryParamRegexs=function(a){for(var b,c=[],d=0;d<a.length;++d)b="\\[?(%5[bB])?"+a[d]+"\\[?(%5[bB])?\\]?(%5[dD])?",c.push(new RegExp("("+b+"=)([^&\\n]+)","igm"));return c},c.prototype._enqueuePayload=function(b,c,d,e){if(!this._internalCheckIgnore(c,d,b)){try{if(this.options.checkIgnore&&"function"==typeof this.options.checkIgnore&&this.options.checkIgnore(c,d,b))return}catch(f){this.configure({checkIgnore:null}),this.error("Error while calling custom checkIgnore() function. Removing custom checkIgnore().",f)}a._rollbarPayloadQueue.push({callback:e,endpointUrl:this._route("item/"),payload:b})}},c.prototype._internalCheckIgnore=function(a,b,d){var e=b[0],f=c.LEVELS[e]||0,g=c.LEVELS[this.options.reportLevel]||0;if(g>f)return!0;var h=this.options?this.options.plugins:{};return h&&h.jquery&&h.jquery.ignoreAjaxErrors&&d.body.message?d.body.messagejquery_ajax_error:!1},c.prototype._log=function(a,b,c,d,e,f){var g=null;if(c){if(g=c._tkStackTrace?c._tkStackTrace:o(c),c===this.lastError)return;this.lastError=c}var h=this._buildPayload(new Date,a,b,g,d);this._enqueuePayload(h,f?!0:!1,[a,b,c,d],e)},c.prototype.log=c._generateLogFn(),c.prototype.debug=c._generateLogFn("debug"),c.prototype.info=c._generateLogFn("info"),c.prototype.warn=c._generateLogFn("warning"),c.prototype.warning=c._generateLogFn("warning"),c.prototype.error=c._generateLogFn("error"),c.prototype.critical=c._generateLogFn("critical"),c.prototype.uncaughtError=d(function(a,c,d,e,f){if(f&&f.stack)return void this._log(this.options.uncaughtErrorLevel,a,f,null,null,!0);if(c&&c.stack)return void this._log(this.options.uncaughtErrorLevel,a,c,null,null,!0);var g={url:c||"",line:d};g.func=o.guessFunctionName(g.url,g.line),g.context=o.gatherContext(g.url,g.line);var h={mode:"onerror",message:a||"uncaught exception",url:b.location.href,stack:[g],useragent:navigator.userAgent};f&&(h=f._tkStackTrace||o(f));var i=this._buildPayload(new Date,this.options.uncaughtErrorLevel,a,h);this._enqueuePayload(i,!0,[this.options.uncaughtErrorLevel,a,c,d,e,f])}),c.prototype.global=d(function(b){h.merge(a._globalRollbarOptions,b)}),c.prototype.configure=d(function(a){h.merge(this.options,a)}),c.prototype.scope=d(function(a){var b=new c(this);return h.merge(b.options.payload,a),b}),c.prototype.wrap=function(b){if("function"!=typeof b)return b;if(b._isWrap)return b;if(!b._wrapped){b._wrapped=function(){try{b.apply(this,arguments)}catch(c){throw c.stack||(c._tkStackTrace=o(c)),a._rollbarWrappedError=c,c}},b._wrapped._isWrap=!0;for(var c in b)b.hasOwnProperty(c)&&(b._wrapped[c]=b[c])}return b._wrapped};var p,q=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");c.processPayloads=function(){p||f()};var r=(new Date).getTime(),s=0;if(!a._rollbarInitialized){var t=a._rollbarConfig||{},u=t.globalAlias||"Rollbar",v=a[u],w=new c(v);w._processShimQueue(a._rollbarShimQueue||[]),a[u]=w,a._rollbarInitialized=!0,c.processPayloads()}}(window,document);
//# sourceMappingURL=https://d37gvrvc0wt4s1.cloudfront.net/js/v1.0.0-beta9/rollbar.min.map